pkgname=libraptorq
pkgver=0.1.7
pkgrel=1
pkgdesc='Forward error correction library implementing RaptorQ algorithm'
arch=(i686 x86_64)
url='https://www.fenrirproject.org'
license=(LGPL3)
makedepends=(cmake lz4)
source=(
	"https://www.fenrirproject.org/Luker/libRaptorQ/repository/archive.tar.gz?ref=v${pkgver}"
)
sha256sums=(
	b8972d4b94bc36b2695a7be67e582964ace03e25817de89536fb3b07ff25e07c
)

build() {
	[[ -e "$srcdir/$pkgname-$pkgver" ]] || {
		mv "$srcdir/libRaptorQ-v$pkgver"-* "$srcdir/$pkgname-$pkgver"
	}
	cd "$srcdir/$pkgname-$pkgver"
	mkdir -p build
	cd build
	cmake -D CMAKE_INSTALL_PREFIX=/usr -D CMAKE_BUILD_TYPE=Release ../
	make
}

package() {
	cd "$srcdir/$pkgname-$pkgver/build"
	make install DESTDIR=${pkgdir}
}
